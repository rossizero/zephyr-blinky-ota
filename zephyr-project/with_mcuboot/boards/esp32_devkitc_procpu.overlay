/*
 * Application-specific hardware configuration and flash layout.
 * The flash partition map here MUST match the one in the .yml file.
 */

/ {
    /* Board-specific hardware customization for your application */
    leds {
        compatible = "gpio-leds";
        status_led: led_0 {
            gpios = <&gpio0 2 GPIO_ACTIVE_HIGH>;
            label = "Status LED";
        };
    };

    aliases {
        led0 = &status_led;
        watchdog0 = &wdt0;
    };

    chosen {
        zephyr,console = &uart0;
        zephyr,shell-uart = &uart0;
        zephyr,code-partition = &slot0_partition; /* Tells Zephyr where the app runs */
    };
};

&uart0 {
    status = "okay";
    current-speed = <115200>;
};

&wifi {
    status = "okay";
};

&wdt0 {
    status = "okay";
};


&flash0 {
    /*
     * We define a completely new set of partitions, tailored for MCUboot
     * in swap-scratch mode.
     */
    /delete-node/ partitions;
    partitions {
        compatible = "fixed-partitions";
        #address-cells = <1>;
        #size-cells = <1>;

        /* Partition for the bootloader itself. Starts at 64K offset. */
        boot_partition: partition@10000 {
            label = "mcuboot";
            reg = <0x10000 0x10000>; /* 64 KB */
        };

        /* Primary application slot. */
        slot0_partition: partition@20000 {
            label = "image-0";
            reg = <0x20000 0xE0000>; /* 896 KB */
        };

        /* Secondary application slot (for the update). */
        slot1_partition: partition@100000 {
            label = "image-1";
            reg = <0x100000 0xE0000>; /* 896 KB */
        };

        /* Scratch partition for swapping images. Label is critical! */
        scratch_partition: partition@1E0000 {
            label = "image-scratch"; /* MUST be "image-scratch" for Kconfig */
            reg = <0x1E0000 0x20000>;  /* 128 KB */
        };

        /* Optional partition for a file system or other data. */
        storage_partition: partition@200000 {
            label = "storage";
            reg = <0x200000 0x10000>; /* 64 KB */
        };
    };
};