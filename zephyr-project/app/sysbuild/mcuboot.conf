# Optimize for size instead of speed
#CONFIG_SIZE_OPTIMIZATIONS_AGGRESSIVE=y
#CONFIG_SIZE_OPTIMIZATIONS=y

# Disable the serial console and all logging. This is the BIGGEST space saver.
CONFIG_CONSOLE=n
CONFIG_UART_CONSOLE=n
CONFIG_SERIAL=n
CONFIG_LOG=n
CONFIG_PRINTK=n
CONFIG_LOG_MODE_MINIMAL=y # former CONFIG_MODE_MINIMAL
CONFIG_LOG_DEFAULT_LEVEL=0
CONFIG_MCUBOOT_LOG_LEVEL_INF=n
#CONFIG_MCUBOOT_UTIL_LOG_LEVEL_OFF=y  # doesnt work

# overflow of 6752 bytes with mbedtls vs 3172 bytes with tinycrypt
CONFIG_BOOT_SIGNATURE_TYPE_ED25519=y
CONFIG_BOOT_ED25519_MBEDTLS=n
CONFIG_BOOT_ED25519_TINYCRYPT=n
CONFIG_BOOT_ED25519_PSA=y
CONFIG_BOOT_KEY_IMPORT_BYPASS_ASN=y
#cCONFIG_MBEDTLS_ASN1_PARSE_C=n can't be disabled for esp32

# Disable assertions. Essential for saving space in a release bootloader.
CONFIG_ASSERT=n

# Disable boot banner to save a few bytes
CONFIG_BOOT_BANNER=n
#CONFIG_MCUBOOT_BOOTLOADER_MODE_SWAP_SCRATCH=y
#CONFIG_MCUBOOT_BOOTLOADER_MODE_OVERWRITE_ONLY=n
#CONFIG_MCUBOOT_BOOTLOADER_MODE_SWAP_SCRATCH=y
CONFIG_BOOT_MAX_IMG_SECTORS_AUTO=y
# Disable the patch for the SPI flash driver ROM functions to save IRAM.
#CONFIG_SPI_FLASH_ROM_DRIVER_PATCH=n
CONFIG_BOOT_UPGRADE_ONLY=y